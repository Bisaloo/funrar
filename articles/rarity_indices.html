<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>How to use <code>funrar</code>, an example with plant communities dataset. • funrar</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="How to use &lt;code&gt;funrar&lt;/code&gt;, an example with plant communities dataset.">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">funrar</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/new_distinctiveness.html">Alternative Distinctiveness definition</a>
    </li>
    <li>
      <a href="../articles/rarity_indices.html">How to use `funrar`, an example with plant communities dataset.</a>
    </li>
    <li>
      <a href="../articles/sparse_matrices.html">Sparse Marices with `funrar`</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Rekyt/funrar">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>How to use <code>funrar</code>, an example with plant communities dataset.</h1>
                        <h4 class="author">Denelle Pierre &amp; Grenié Matthias</h4>
            
            <h4 class="date">2019-02-24</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Rekyt/funrar/blob/master/vignettes/rarity_indices.Rmd"><code>vignettes/rarity_indices.Rmd</code></a></small>
      <div class="hidden name"><code>rarity_indices.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>The idea of Functional Rarity is to measure two components of the rarity of a species (or an individual). In community ecology, researchers are generally interested in the rarity of a species as measured in terms of abundances. A species with a low abundance will be considered ‘rare’. From a functional ecology perspective, this omits important information about the “role” that a given species plays in the ecosystem, its particular niche. A framework is being developed of various indices to characterize how functioning can be rare locally or regionally</p>
<p>In their article, Violle et al. (2017) introduced 4 indices to compute functional rarity indices. <code>funrar</code> package enables ecologists to compute these on any dataset.</p>
</div>
<div id="framework" class="section level1">
<h1 class="hasAnchor">
<a href="#framework" class="anchor"></a>Framework</h1>
<p>The following figure show the 4 aspects covered by the metrics. Rarity is thus considered at local and regional scales and also from abundance and functional point of views. The name of the package functions are written underneath metrics’ names.</p>
<div class="figure">
<img src="figures/funrar_scheme.png" alt="Rarity indices and corresponding functions."><p class="caption">Rarity indices and corresponding functions.</p>
</div>
</div>
<div id="dataset-example" class="section level1">
<h1 class="hasAnchor">
<a href="#dataset-example" class="anchor"></a>Dataset example</h1>
<p>To illustrate the package, we are using a dataset describing the distribution of 82 species of Alpine plants in 75 sites. This dataset was collected by Choler et al.(2005).</p>
<p>Species traits and environmental variables are also available.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="st">"aravo"</span>, <span class="dt">package =</span> <span class="st">"ade4"</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(aravo)</a></code></pre></div>
<pre><code>## List of 4
##  $ spe      :'data.frame':   75 obs. of  82 variables:
##   ..$ Agro.rupe: int [1:75] 0 0 3 0 0 0 2 0 0 3 ...
##   ..$ Alop.alpi: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Anth.nipp: int [1:75] 0 0 1 0 0 0 0 0 0 0 ...
##   ..$ Heli.sede: int [1:75] 0 0 0 2 0 0 0 0 0 0 ...
##   ..$ Aven.vers: int [1:75] 0 0 1 0 0 0 2 0 1 2 ...
##   ..$ Care.rosa: int [1:75] 1 2 2 2 0 3 2 2 3 3 ...
##   ..$ Care.foet: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Care.parv: int [1:75] 0 1 0 0 0 1 1 1 1 0 ...
##   ..$ Care.rupe: int [1:75] 3 0 0 0 0 1 0 3 0 0 ...
##   ..$ Care.semp: int [1:75] 0 0 1 0 0 0 0 1 0 2 ...
##   ..$ Fest.laev: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Fest.quad: int [1:75] 2 0 3 1 3 0 2 3 0 0 ...
##   ..$ Fest.viol: int [1:75] 0 0 1 0 1 0 0 0 0 0 ...
##   ..$ Kobr.myos: int [1:75] 1 3 4 1 1 4 2 2 3 1 ...
##   ..$ Luzu.lute: int [1:75] 0 0 1 0 0 0 1 1 1 1 ...
##   ..$ Poa.alpi : int [1:75] 1 2 0 2 0 2 0 0 1 1 ...
##   ..$ Poa.supi : int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Sesl.caer: int [1:75] 0 0 0 1 1 1 0 2 0 0 ...
##   ..$ Alch.pent: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Alch.glau: int [1:75] 0 0 1 0 0 0 0 0 0 0 ...
##   ..$ Alch.vulg: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Andr.brig: int [1:75] 0 0 0 0 0 0 0 0 0 1 ...
##   ..$ Ante.carp: int [1:75] 0 1 1 0 0 1 1 1 1 2 ...
##   ..$ Ante.dioi: int [1:75] 0 0 0 0 0 0 0 1 0 0 ...
##   ..$ Arni.mont: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Aste.alpi: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Bart.alpi: int [1:75] 0 1 0 0 0 1 0 0 0 0 ...
##   ..$ Camp.sche: int [1:75] 0 1 1 1 1 1 1 0 1 1 ...
##   ..$ Card.alpi: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Cera.stri: int [1:75] 0 0 0 0 0 1 0 0 1 0 ...
##   ..$ Cera.cera: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Leuc.alpi: int [1:75] 0 0 0 0 0 0 1 0 0 1 ...
##   ..$ Cirs.acau: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Drab.aizo: int [1:75] 0 0 0 1 0 0 1 0 1 1 ...
##   ..$ Drya.octo: int [1:75] 0 1 0 0 0 1 0 0 0 0 ...
##   ..$ Erig.unif: int [1:75] 0 0 1 1 0 0 1 1 0 0 ...
##   ..$ Gent.camp: int [1:75] 0 0 0 0 0 0 1 0 1 1 ...
##   ..$ Gent.acau: int [1:75] 0 0 1 0 0 0 0 0 0 0 ...
##   ..$ Gent.vern: int [1:75] 0 0 1 1 1 0 0 0 0 1 ...
##   ..$ Geum.mont: int [1:75] 0 0 2 0 0 0 0 0 0 0 ...
##   ..$ Omal.supi: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Andr.vita: int [1:75] 0 0 0 0 1 0 1 0 1 0 ...
##   ..$ Hier.pili: int [1:75] 0 0 0 0 0 0 1 0 0 0 ...
##   ..$ Homo.alpi: int [1:75] 0 0 0 0 0 1 0 0 0 1 ...
##   ..$ Leon.pyre: int [1:75] 0 0 0 0 0 0 1 0 0 0 ...
##   ..$ Ligu.muto: int [1:75] 0 1 0 1 0 2 0 1 1 0 ...
##   ..$ Lloy.sero: int [1:75] 0 1 0 0 0 1 1 0 0 0 ...
##   ..$ Minu.sedo: int [1:75] 1 0 0 0 0 0 1 1 2 1 ...
##   ..$ Minu.vern: int [1:75] 1 0 1 1 1 0 1 0 1 1 ...
##   ..$ Phyt.orbi: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Plan.alpi: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Poly.vivi: int [1:75] 1 1 1 0 1 1 1 1 1 0 ...
##   ..$ Pote.aure: int [1:75] 0 0 2 0 0 0 1 0 0 0 ...
##   ..$ Pote.cran: int [1:75] 0 0 1 0 0 0 0 0 1 0 ...
##   ..$ Pote.gran: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Puls.vern: int [1:75] 0 0 2 0 0 0 1 1 1 1 ...
##   ..$ Ranu.kuep: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Sagi.glab: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Sali.herb: int [1:75] 0 0 0 0 0 0 1 0 0 0 ...
##   ..$ Sali.reti: int [1:75] 0 1 0 0 0 2 0 0 0 0 ...
##   ..$ Sali.retu: int [1:75] 0 2 0 0 0 2 0 0 0 0 ...
##   ..$ Sali.serp: int [1:75] 0 1 0 0 0 0 0 0 2 0 ...
##   ..$ Saxi.pani: int [1:75] 1 0 0 2 1 1 0 1 1 1 ...
##   ..$ Sedu.alpe: int [1:75] 0 0 0 0 0 0 0 0 0 1 ...
##   ..$ Semp.mont: int [1:75] 0 1 1 1 0 1 1 0 1 1 ...
##   ..$ Sene.inca: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Sibb.proc: int [1:75] 0 0 0 0 0 0 1 0 0 1 ...
##   ..$ Sile.acau: int [1:75] 1 1 1 0 0 2 1 0 1 0 ...
##   ..$ Thym.poly: int [1:75] 0 0 0 2 0 0 0 0 0 0 ...
##   ..$ Vero.alpi: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Vero.alli: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Vero.bell: int [1:75] 0 0 0 1 0 1 1 0 1 1 ...
##   ..$ Myos.alpe: int [1:75] 0 0 1 1 0 0 1 0 0 1 ...
##   ..$ Tara.alpi: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Scab.luci: int [1:75] 0 0 1 0 0 0 0 0 0 0 ...
##   ..$ Anth.alpe: int [1:75] 0 1 0 0 0 0 0 0 0 0 ...
##   ..$ Oxyt.camp: int [1:75] 1 0 1 0 0 0 0 0 0 0 ...
##   ..$ Oxyt.lapp: int [1:75] 1 1 0 1 1 1 0 0 0 0 ...
##   ..$ Lotu.alpi: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Trif.alpi: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Trif.badi: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##   ..$ Trif.thal: int [1:75] 0 0 0 0 0 0 0 0 0 0 ...
##  $ env      :'data.frame':   75 obs. of  6 variables:
##   ..$ Aspect: int [1:75] 7 1 5 9 9 1 5 6 9 1 ...
##   ..$ Slope : int [1:75] 2 35 0 30 5 30 10 12 2 5 ...
##   ..$ Form  : Factor w/ 5 levels "1","2","3","4",..: 1 3 3 3 1 3 3 2 1 3 ...
##   ..$ PhysD : int [1:75] 50 40 20 80 80 40 70 15 65 60 ...
##   ..$ ZoogD : Factor w/ 3 levels "no","some","high": 1 1 1 1 1 1 1 1 1 1 ...
##   ..$ Snow  : int [1:75] 140 140 140 140 140 140 160 140 140 150 ...
##  $ traits   :'data.frame':   82 obs. of  8 variables:
##   ..$ Height: num [1:82] 6 5 15 0 12 30 12 25 9 20 ...
##   ..$ Spread: int [1:82] 10 20 5 30 30 20 40 10 5 20 ...
##   ..$ Angle : int [1:82] 80 20 50 80 60 80 45 80 70 50 ...
##   ..$ Area  : num [1:82] 60 191 280 600 420 ...
##   ..$ Thick : num [1:82] 0.12 0.2 0.08 0.2 0.14 0.4 0.14 0.2 0.2 0.2 ...
##   ..$ SLA   : num [1:82] 8.1 15.1 18 10.6 12.5 6.5 19 13.7 8.8 11.5 ...
##   ..$ N_mass: num [1:82] 219 204 220 233 156 ...
##   ..$ Seed  : num [1:82] 0.08 0.21 0.54 1.72 1.17 1.68 0.23 0.61 0.64 0.83 ...
##  $ spe.names: Named chr [1:82] "Agrostis rupestris All." "Alopecurus alpinus Vill." "Anthoxanthum odoratum L.  subsp. nipponicum (Honda) Tzvelev" "Helictotrichon sedenense (DC.) Holub" ...
##   ..- attr(*, "names")= chr [1:82] "Agro.rupe" "Alop.alpi" "Anth.nipp" "Heli.sede" ...</code></pre>
</div>
<div id="functional-rarity-indices" class="section level1">
<h1 class="hasAnchor">
<a href="#functional-rarity-indices" class="anchor"></a>Functional rarity indices</h1>
<div id="inputs-of-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#inputs-of-functions" class="anchor"></a>Inputs of functions</h2>
<p>For each metric, the package includes two functions, depending on the input type. Ecologist usually have to deal with site-species matrix, containing sites names as rows, species in columns and either abundances or presence/absence data (see example datasets in <code>vegan</code> or <code>ade4</code> packages for example). Thus, this matrix is needed as an input for each simple function.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># Site-species matrix stored in aravo$spe</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">mat =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">as.matrix</a></span>(aravo<span class="op">$</span>spe)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">mat[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</a></code></pre></div>
<pre><code>##      Agro.rupe Alop.alpi Anth.nipp Heli.sede Aven.vers
## AR07         0         0         0         0         0
## AR71         0         0         0         0         0
## AR26         3         0         1         0         1
## AR54         0         0         0         2         0
## AR60         0         0         0         0         0</code></pre>
<p><code>metricname()</code> functions can be used to compute indices directly on site-species matrices.</p>
<p>Users can also use a stacked (or tidy) data.frame, containing columns for sites, species and abundances. The package contains for each metric another function called <code>metricname_stack()</code> function that can take these stacked data.frames as inputs.</p>
<p><code>funrar</code> package includes two functions to go from one format to the other: <code><a href="../reference/matrix_to_stack.html">matrix_to_stack()</a></code> and <code><a href="../reference/stack_to_matrix.html">stack_to_matrix()</a></code></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(funrar)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">dat =<span class="st"> </span><span class="kw"><a href="../reference/matrix_to_stack.html">matrix_to_stack</a></span>(mat, <span class="st">"value"</span>, <span class="st">"site"</span>, <span class="st">"species"</span>)</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(dat)</a></code></pre></div>
<pre><code>##     species site value
## 1 Agro.rupe AR07     0
## 2 Agro.rupe AR71     0
## 3 Agro.rupe AR26     3
## 4 Agro.rupe AR54     0
## 5 Agro.rupe AR60     0
## 6 Agro.rupe AR70     0</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># The reverse function is provided and gives the same original matrix</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/identical">identical</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(<span class="kw"><a href="../reference/stack_to_matrix.html">stack_to_matrix</a></span>(dat, <span class="st">"site"</span>, <span class="st">"species"</span>, <span class="st">"value"</span>)), <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">as.numeric</a></span>(mat))</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># Removal of empty rows</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">dat =<span class="st"> </span>dat[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/which">which</a></span>(dat<span class="op">$</span>value <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>), ]</a></code></pre></div>
<p>The package is also able to deal with large matrices with many zeroes by using sparse matrices. For more details, see <code>sparse_matrices</code> vignette.</p>
</div>
<div id="indices" class="section level2">
<h2 class="hasAnchor">
<a href="#indices" class="anchor"></a>Indices</h2>
<div id="distance-matrix-computation" class="section level3">
<h3 class="hasAnchor">
<a href="#distance-matrix-computation" class="anchor"></a>Distance matrix computation</h3>
<p>The indices rely on the computation of a distance matrix. It represents the functional distance between two species given a particular set of traits. From a species traits matrix you can easily compute a distance matrix using function <code><a href="../reference/compute_dist_matrix.html">compute_dist_matrix()</a></code>.</p>
<p>In order to compute distance matrix, species names must be specified as <strong>rownames</strong> in the traits table. Further, species names must match between the traits table and distance matrix. Species names must be characters and not factors.</p>
<p>The function relies on the <code>daisy()</code> function from package <code>cluster</code> and the default metric is Gower’s distance to take into account ordinal, categorical and binary traits:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">tra =<span class="st"> </span>aravo<span class="op">$</span>traits[, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Height"</span>, <span class="st">"SLA"</span>, <span class="st">"N_mass"</span>)]</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(tra)</a></code></pre></div>
<pre><code>##           Height  SLA N_mass
## Agro.rupe      6  8.1 218.70
## Alop.alpi      5 15.1 203.85
## Anth.nipp     15 18.0 219.60
## Heli.sede      0 10.6 233.20
## Aven.vers     12 12.5 156.25
## Care.rosa     30  6.5 208.65</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">dist_mat =<span class="st"> </span><span class="kw"><a href="../reference/compute_dist_matrix.html">compute_dist_matrix</a></span>(tra)</a></code></pre></div>
<pre><code>## Warning in compute_dist_matrix(tra): Only numeric traits provided, consider
## using euclidean distance.</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">dist_mat[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</a></code></pre></div>
<pre><code>##           Agro.rupe Alop.alpi Anth.nipp Heli.sede Aven.vers
## Agro.rupe 0.0000000 0.1004668 0.2083010 0.1068477 0.1705883
## Alop.alpi 0.1004668 0.0000000 0.1567591 0.1308034 0.1488041
## Anth.nipp 0.2083010 0.1567591 0.0000000 0.2592416 0.1500077
## Heli.sede 0.1068477 0.1308034 0.2592416 0.0000000 0.2231472
## Aven.vers 0.1705883 0.1488041 0.1500077 0.2231472 0.0000000</code></pre>
<p>Using the <code>metric</code> argument in <code><a href="../reference/compute_dist_matrix.html">compute_dist_matrix()</a></code> you can specify other distance metrics (<code>euclidean</code> for Euclidean distances and <code>manhattan</code> for Manhattan distances) for functional distances. You can also compute your own distance matrix with other methods as long as it is a matrix and both row names and column names are species names.</p>
</div>
<div id="functional-distinctiveness-computation" class="section level3">
<h3 class="hasAnchor">
<a href="#functional-distinctiveness-computation" class="anchor"></a>Functional Distinctiveness computation</h3>
<div id="formula" class="section level4">
<h4 class="hasAnchor">
<a href="#formula" class="anchor"></a>Formula</h4>
<p>The distinctiveness measures how a species is locally functionally rare, in comparison with the other species of community. Each species (or individual) in each community will get a distinctiveness value. Distinctiveness values range from 0 to 1. A value of 0 indicates that the focal species is not locally functionally distant from the other and conversely.</p>
<p>From given functional distances, it is computed as such: <span class="math display">\[
D_i = \frac{\sum_{\substack{j = 1, \\
                            i \neq j
                            }}^{N} d_{ij}}{N-1},
\]</span> with <span class="math inline">\(D_i\)</span> distinctiveness of species <span class="math inline">\(i\)</span>, <span class="math inline">\(d_{ij}\)</span> the functional distance between species <span class="math inline">\(i\)</span> and species <span class="math inline">\(j\)</span>, <span class="math inline">\(N\)</span> the number of species present in considered community.</p>
<p>When weighted by abundances the formula becomes: <span class="math display">\[
D_i = \frac{\sum_{\substack{j = 1, \\
                            i \neq j
                            }}^{N} d_{ij}\times A_j}{\sum_{\substack{j = 1, \\
                            i \neq j
                            }}^{N} A_j},
\]</span> with the same terms as above, and <span class="math inline">\(A_j\)</span> the relative abundance of species <span class="math inline">\(j\)</span> in percent, in the community.</p>
</div>
<div id="computation-with-site-species-matrix" class="section level4">
<h4 class="hasAnchor">
<a href="#computation-with-site-species-matrix" class="anchor"></a>Computation with site-species matrix</h4>
<p>Using <code>funrar</code> functional distinctiveness can be computed using function <code><a href="../reference/distinctiveness.html">distinctiveness()</a></code>:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="co"># Compute distinctiveness for each species on each site</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2">di =<span class="st"> </span><span class="kw"><a href="../reference/distinctiveness.html">distinctiveness</a></span>(<span class="dt">pres_matrix =</span> mat,  <span class="co"># The site x species matrix</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3">                     <span class="dt">dist_matrix =</span> dist_mat)  <span class="co"># Functional Distance matrix</span></a></code></pre></div>
<pre><code>## Warning in distinctiveness(pres_matrix = mat, dist_matrix = dist_mat): Provided object may not contain relative abundances nor presence-absence
## Have a look at the make_relative() function if it is the case</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">di[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</a></code></pre></div>
<pre><code>##      Agro.rupe Alop.alpi Anth.nipp Heli.sede Aven.vers
## AR07        NA        NA        NA        NA        NA
## AR71        NA        NA        NA        NA        NA
## AR26 0.1460428        NA 0.2039929        NA 0.1788624
## AR54        NA        NA        NA 0.1786867        NA
## AR60        NA        NA        NA        NA        NA</code></pre>
<p>The syntax for <code><a href="../reference/distinctiveness.html">distinctiveness()</a></code> is first the matrix and then the functional distance matrix. The function returns a site-species matrix filled with <code>Di</code> values, i.e. the species functional distinctiveness in each species per site combination.</p>
</div>
<div id="computation-with-stacked-data-frame" class="section level4">
<h4 class="hasAnchor">
<a href="#computation-with-stacked-data-frame" class="anchor"></a>Computation with stacked data.frame</h4>
<p>Using <code>funrar</code> distinctiveness values can be computed using function <code><a href="../reference/distinctiveness_stack.html">distinctiveness_stack()</a></code>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="co"># Species should be character</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2">dat<span class="op">$</span>species =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/character">as.character</a></span>(dat<span class="op">$</span>species)</a>
<a class="sourceLine" id="cb20-3" data-line-number="3"></a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="co"># Compute distinctiveness for each species on each site</span></a>
<a class="sourceLine" id="cb20-5" data-line-number="5">di_df =<span class="st"> </span><span class="kw"><a href="../reference/distinctiveness_stack.html">distinctiveness_stack</a></span>(<span class="dt">com_df =</span> dat,  <span class="co"># The site x species table</span></a>
<a class="sourceLine" id="cb20-6" data-line-number="6">                              <span class="dt">sp_col =</span> <span class="st">"species"</span>,  <span class="co"># Name of the species column</span></a>
<a class="sourceLine" id="cb20-7" data-line-number="7">                              <span class="dt">com =</span> <span class="st">"site"</span>,  <span class="co"># Name of the community column</span></a>
<a class="sourceLine" id="cb20-8" data-line-number="8">                              <span class="dt">abund =</span> <span class="ot">NULL</span>,  <span class="co"># Relative abundances column (facultative)</span></a>
<a class="sourceLine" id="cb20-9" data-line-number="9">                              <span class="dt">dist_matrix =</span> dist_mat)  <span class="co"># Functional Distance matrix</span></a></code></pre></div>
<pre><code>## No relative abundance provided, computing Di without it</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(di_df)</a></code></pre></div>
<pre><code>##     species site value        Di
## 1 Care.rosa AR07     1 0.3777876
## 2 Care.rupe AR07     3 0.1748829
## 3 Fest.quad AR07     2 0.1709311
## 4 Kobr.myos AR07     1 0.2358800
## 5  Poa.alpi AR07     1 0.1647911
## 6 Minu.sedo AR07     1 0.2271418</code></pre>
<p>The syntax for <code><a href="../reference/distinctiveness_stack.html">distinctiveness_stack()</a></code> is first the table, then the name of the species column, then the name of the community column, then the name of the relative abundance column and finally the distance matrix. The function add a <code>Di</code> column giving the species distinctiveness in each species per site combination.</p>
<p>For abundance weighted distinctiveness you need to have a column containing relative abundances in your data frame as such:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">di_df =<span class="st"> </span><span class="kw"><a href="../reference/distinctiveness_stack.html">distinctiveness_stack</a></span>(dat, <span class="st">"species"</span>, <span class="st">"site"</span>, <span class="st">"value"</span>, dist_mat)</a></code></pre></div>
<pre><code>## Warning in distinctiveness_stack(dat, "species", "site", "value", dist_mat): Provided object may not contain relative abundances nor presence-absence
## Have a look at the make_relative() function if it is the case</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(di_df)</a></code></pre></div>
<pre><code>##     species site value        Di
## 1 Care.rosa AR07     1 0.3588528
## 2 Care.rupe AR07     3 0.1619372
## 3 Fest.quad AR07     2 0.1476393
## 4 Kobr.myos AR07     1 0.2150834
## 5  Poa.alpi AR07     1 0.1399526
## 6 Minu.sedo AR07     1 0.2107469</code></pre>
</div>
</div>
<div id="scarcity" class="section level3">
<h3 class="hasAnchor">
<a href="#scarcity" class="anchor"></a>Scarcity</h3>
<div id="formula-1" class="section level4">
<h4 class="hasAnchor">
<a href="#formula-1" class="anchor"></a>Formula</h4>
<p>The scarcity measures how locally abundant a species is, in comparison to the other species of community. Each species (or individual) in each community will get a scarcity value. Scarcity values range from 0 to 1. A 0 value indicates that the focal species is locally abundant and conversely.</p>
<p><span class="math display">\[
S_i = \exp(-NA_i\log2),
\]</span></p>
<p>with <span class="math inline">\(S_i\)</span> the scarcity of species <span class="math inline">\(i\)</span>, <span class="math inline">\(N\)</span> the number of species in the local community, <span class="math inline">\(A_i\)</span> the relative abundance (in percent) of species <span class="math inline">\(i\)</span> in the community.</p>
</div>
<div id="computation" class="section level4">
<h4 class="hasAnchor">
<a href="#computation" class="anchor"></a>Computation</h4>
<p>With <code>funrar</code> it can be computed with <code><a href="../reference/scarcity.html">scarcity()</a></code> function with a syntax analog to <code><a href="../reference/distinctiveness.html">distinctiveness()</a></code></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">si =<span class="st"> </span><span class="kw"><a href="../reference/scarcity.html">scarcity</a></span>(<span class="dt">pres_matrix =</span> mat)</a></code></pre></div>
<pre><code>## Warning in scarcity(pres_matrix = mat): Provided object may not contain relative abundances nor presence-absence
## Have a look at the make_relative() function if it is the case</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">si[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</a></code></pre></div>
<pre><code>##         Agro.rupe Alop.alpi    Anth.nipp    Heli.sede    Aven.vers
## AR07           NA        NA           NA           NA           NA
## AR71           NA        NA           NA           NA           NA
## AR26 3.308722e-24        NA 1.490116e-08           NA 1.490116e-08
## AR54           NA        NA           NA 1.455192e-11           NA
## AR60           NA        NA           NA           NA           NA</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">si_df =<span class="st"> </span><span class="kw"><a href="../reference/scarcity_stack.html">scarcity_stack</a></span>(dat, <span class="st">"species"</span>, <span class="st">"site"</span>, <span class="st">"value"</span>)</a>
<a class="sourceLine" id="cb32-2" data-line-number="2"></a>
<a class="sourceLine" id="cb32-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(si_df)</a></code></pre></div>
<pre><code>##     species site value           Si
## 1 Care.rosa AR07     1 2.441406e-04
## 2 Care.rupe AR07     3 1.455192e-11
## 3 Fest.quad AR07     2 5.960464e-08
## 4 Kobr.myos AR07     1 2.441406e-04
## 5  Poa.alpi AR07     1 2.441406e-04
## 6 Minu.sedo AR07     1 2.441406e-04</code></pre>
</div>
</div>
<div id="uniqueness" class="section level3">
<h3 class="hasAnchor">
<a href="#uniqueness" class="anchor"></a>Uniqueness</h3>
<div id="formula-2" class="section level4">
<h4 class="hasAnchor">
<a href="#formula-2" class="anchor"></a>Formula</h4>
<p>Uniqueness measures how functionally rare a species is at the regional scale. Each species (or individual) in the species pool will get a uniqueness value. Uniqueness values range from 0 to 1. A 0 value indicates that the focal species shares the exact same traits as other species in the pool and conversely.</p>
<p><span class="math display">\[
U_i = \text{min}(d_{ij}), \forall j \in [1, N_R], j \neq i,
\]</span></p>
<p>with <span class="math inline">\(U_i\)</span> the uniqueness of species <span class="math inline">\(i\)</span>, <span class="math inline">\(d_{ij}\)</span> the functional distance between species <span class="math inline">\(i\)</span> and species <span class="math inline">\(j\)</span>, <span class="math inline">\(N_R\)</span> the number of species in the regional pool.</p>
</div>
<div id="computation-1" class="section level4">
<h4 class="hasAnchor">
<a href="#computation-1" class="anchor"></a>Computation</h4>
<p><code><a href="../reference/uniqueness.html">uniqueness()</a></code> follows a similar syntax, but beware that given community table and distance matrix should respresent the <strong>regional species pool</strong>. And the syntax is also similar:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">ui =<span class="st"> </span><span class="kw"><a href="../reference/uniqueness.html">uniqueness</a></span>(mat, dist_mat)</a>
<a class="sourceLine" id="cb34-2" data-line-number="2"></a>
<a class="sourceLine" id="cb34-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(ui)</a></code></pre></div>
<pre><code>##     species         Ui
## 1 Agro.rupe 0.03635369
## 2 Alop.alpi 0.03715692
## 3 Anth.nipp 0.09414051
## 4 Heli.sede 0.02270997
## 5 Aven.vers 0.05675178
## 6 Care.rosa 0.15922932</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">ui_df =<span class="st"> </span><span class="kw"><a href="../reference/uniqueness_stack.html">uniqueness_stack</a></span>(dat, <span class="st">"species"</span>, dist_mat)</a>
<a class="sourceLine" id="cb36-2" data-line-number="2"></a>
<a class="sourceLine" id="cb36-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(ui_df)</a></code></pre></div>
<pre><code>##     species         Ui
## 1 Agro.rupe 0.03635369
## 2 Alop.alpi 0.03715692
## 3 Anth.nipp 0.09414051
## 4 Heli.sede 0.02270997
## 5 Aven.vers 0.05675178
## 6 Care.rosa 0.15922932</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/dim">dim</a></span>(ui_df[<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/duplicated">duplicated</a></span>(ui_df<span class="op">$</span>species), ])</a></code></pre></div>
<pre><code>## [1] 82  2</code></pre>
</div>
</div>
<div id="geographical-restrictedness" class="section level3">
<h3 class="hasAnchor">
<a href="#geographical-restrictedness" class="anchor"></a>Geographical Restrictedness</h3>
<div id="formula-3" class="section level4">
<h4 class="hasAnchor">
<a href="#formula-3" class="anchor"></a>Formula</h4>
<p>Restrictedness measures how regionally rare a species is. The following function represents a species’ occupancy for a set of communities. Each species (or individual) in the species pool will have a restrictedness value. Restrictedness values range from 0 to 1. A 0 value indicates that the focal species is present in all the sites.</p>
<p><span class="math display">\[
R_i = 1 - N_i/N_tot
\]</span></p>
<p>with <span class="math inline">\(R_i\)</span> the restrictedness of species <span class="math inline">\(i\)</span>, <span class="math inline">\(N_i\)</span> the number of sites where species <span class="math inline">\(i\)</span> is found and <span class="math inline">\(N_tot\)</span> the total number of sites.</p>
</div>
<div id="computation-2" class="section level4">
<h4 class="hasAnchor">
<a href="#computation-2" class="anchor"></a>Computation</h4>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1">ri =<span class="st"> </span><span class="kw"><a href="../reference/restrictedness.html">restrictedness</a></span>(mat)</a>
<a class="sourceLine" id="cb40-2" data-line-number="2"></a>
<a class="sourceLine" id="cb40-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(ri)</a></code></pre></div>
<pre><code>##     species        Ri
## 1 Agro.rupe 0.6133333
## 2 Alop.alpi 0.5066667
## 3 Anth.nipp 0.7733333
## 4 Heli.sede 0.9466667
## 5 Aven.vers 0.8000000
## 6 Care.rosa 0.6266667</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1"><span class="co"># Species should be character</span></a>
<a class="sourceLine" id="cb42-2" data-line-number="2">dat<span class="op">$</span>site =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/character">as.character</a></span>(dat<span class="op">$</span>site)</a>
<a class="sourceLine" id="cb42-3" data-line-number="3"></a>
<a class="sourceLine" id="cb42-4" data-line-number="4">ri_df =<span class="st"> </span><span class="kw"><a href="../reference/restrictedness_stack.html">restrictedness_stack</a></span>(dat, <span class="st">"species"</span>, <span class="st">"site"</span>)</a>
<a class="sourceLine" id="cb42-5" data-line-number="5"></a>
<a class="sourceLine" id="cb42-6" data-line-number="6"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(ri_df)</a></code></pre></div>
<pre><code>##     species        Ri
## 1 Agro.rupe 0.6133333
## 2 Alch.glau 0.8133333
## 3 Alch.pent 0.6533333
## 4 Alch.vulg 0.9333333
## 5 Alop.alpi 0.5066667
## 6 Andr.brig 0.7733333</code></pre>
</div>
</div>
<div id="funrar" class="section level3">
<h3 class="hasAnchor">
<a href="#funrar" class="anchor"></a>funrar</h3>
<p>This function computes all of the four metrics introduced above.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1">all_ind =<span class="st"> </span><span class="kw"><a href="../reference/funrar.html">funrar</a></span>(mat, dist_mat, <span class="dt">rel_abund =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## Warning in distinctiveness(pres_matrix, dist_matrix): Provided object may not contain relative abundances nor presence-absence
## Have a look at the make_relative() function if it is the case</code></pre>
<pre><code>## Warning in scarcity(pres_matrix): Provided object may not contain relative abundances nor presence-absence
## Have a look at the make_relative() function if it is the case</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(all_ind)</a></code></pre></div>
<pre><code>## List of 4
##  $ Ui:'data.frame':  82 obs. of  2 variables:
##   ..$ species: Factor w/ 82 levels "Agro.rupe","Alch.glau",..: 1 5 11 36 14 20 18 19 21 22 ...
##   ..$ Ui     : num [1:82] 0.0364 0.0372 0.0941 0.0227 0.0568 ...
##  $ Di: num [1:75, 1:82] NA NA 0.146 NA NA ...
##   ..- attr(*, "dimnames")=List of 2
##   .. ..$ : chr [1:75] "AR07" "AR71" "AR26" "AR54" ...
##   .. ..$ : chr [1:82] "Agro.rupe" "Alop.alpi" "Anth.nipp" "Heli.sede" ...
##  $ Ri:'data.frame':  82 obs. of  2 variables:
##   ..$ species: Factor w/ 82 levels "Agro.rupe","Alch.glau",..: 1 5 11 36 14 20 18 19 21 22 ...
##   ..$ Ri     : num [1:82] 0.613 0.507 0.773 0.947 0.8 ...
##  $ Si: num [1:75, 1:82] NA NA 3.31e-24 NA NA ...
##   ..- attr(*, "dimnames")=List of 2
##   .. ..$ : chr [1:75] "AR07" "AR71" "AR26" "AR54" ...
##   .. ..$ : chr [1:82] "Agro.rupe" "Alop.alpi" "Anth.nipp" "Heli.sede" ...</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/identical">identical</a></span>(all_ind<span class="op">$</span>Ui, ui)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/identical">identical</a></span>(all_ind<span class="op">$</span>Di, di)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/identical">identical</a></span>(all_ind<span class="op">$</span>Ri, ri)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/identical">identical</a></span>(all_ind<span class="op">$</span>Si, si)</a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
</div>
</div>
<div id="plots" class="section level1">
<h1 class="hasAnchor">
<a href="#plots" class="anchor"></a>Plots</h1>
<p>In this section, some ideas to plot your results are presented. For example the density of the various indices or a matrix visualization of the values of distinctiveness per species.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb57-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)</a></code></pre></div>
<pre><code>## 
## Attaching package: 'dplyr'</code></pre>
<pre><code>## The following objects are masked from 'package:stats':
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" data-line-number="1"><span class="co"># Heatmap with distinctiveness values</span></a>
<a class="sourceLine" id="cb61-2" data-line-number="2"><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(di_df, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(species, site)) <span class="op">+</span></a>
<a class="sourceLine" id="cb61-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">fill =</span> Di), <span class="dt">colour =</span> <span class="st">"white"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb61-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradient</a></span>(<span class="dt">low =</span> <span class="st">"white"</span>, <span class="dt">high =</span> <span class="st">"steelblue"</span>)</a></code></pre></div>
<p><img src="rarity_indices_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1"><span class="co"># Density of distinctiveness values</span></a>
<a class="sourceLine" id="cb62-2" data-line-number="2"></a>
<a class="sourceLine" id="cb62-3" data-line-number="3">quant =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/quantile">quantile</a></span>(di_df<span class="op">$</span>Di, <span class="dt">probs =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.10</span>))</a>
<a class="sourceLine" id="cb62-4" data-line-number="4">labels_quant =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(quant)[<span class="op">-</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(quant)], <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(quant)[<span class="op">-</span><span class="dv">1</span>], <span class="dt">sep =</span> <span class="st">"-"</span>)</a>
<a class="sourceLine" id="cb62-5" data-line-number="5"> </a>
<a class="sourceLine" id="cb62-6" data-line-number="6">di_density =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/density">density</a></span>(di_df<span class="op">$</span>Di)[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"x"</span>, <span class="st">"y"</span>)])</a>
<a class="sourceLine" id="cb62-7" data-line-number="7">di_density =<span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(di_density, x <span class="op">&gt;=</span><span class="st"> </span>quant[[<span class="dv">1</span>]] <span class="op">&amp;</span><span class="st"> </span>x <span class="op">&lt;=</span><span class="st"> </span>quant[[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(quant)]])</a>
<a class="sourceLine" id="cb62-8" data-line-number="8">di_density<span class="op">$</span>quant =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cut">cut</a></span>(di_density<span class="op">$</span>x, <span class="dt">breaks =</span> quant)   </a>
<a class="sourceLine" id="cb62-9" data-line-number="9">quant =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/quantile">quantile</a></span>(di_df<span class="op">$</span>Di, <span class="dt">probs =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.10</span>))</a>
<a class="sourceLine" id="cb62-10" data-line-number="10">labels_quant =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(quant)[<span class="op">-</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(quant)], <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(quant)[<span class="op">-</span><span class="dv">1</span>], <span class="dt">sep =</span> <span class="st">"-"</span>)</a>
<a class="sourceLine" id="cb62-11" data-line-number="11"></a>
<a class="sourceLine" id="cb62-12" data-line-number="12">di_dens =<span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="dt">data =</span> di_density, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y)) <span class="op">+</span></a>
<a class="sourceLine" id="cb62-13" data-line-number="13"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_area</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">fill =</span> quant)) <span class="op">+</span></a>
<a class="sourceLine" id="cb62-14" data-line-number="14"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span>(<span class="dt">palette =</span> <span class="st">"RdYlBu"</span>, <span class="dt">labels =</span> labels_quant,</a>
<a class="sourceLine" id="cb62-15" data-line-number="15">                    <span class="dt">name =</span> <span class="st">"Quantile"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb62-16" data-line-number="16"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>(<span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb62-17" data-line-number="17"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span>(<span class="st">"Distinctiveness values"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb62-18" data-line-number="18"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span>(<span class="st">"Frequency"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb62-19" data-line-number="19"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span>(<span class="st">"Density of distinctiveness values"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb62-20" data-line-number="20"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span>()</a>
<a class="sourceLine" id="cb62-21" data-line-number="21"></a>
<a class="sourceLine" id="cb62-22" data-line-number="22">di_dens</a></code></pre></div>
<p><img src="rarity_indices_files/figure-html/unnamed-chunk-8-2.png" width="700"></p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" data-line-number="1"><span class="co"># Density of scarcity values</span></a>
<a class="sourceLine" id="cb63-2" data-line-number="2"></a>
<a class="sourceLine" id="cb63-3" data-line-number="3">quant =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/quantile">quantile</a></span>(si_df<span class="op">$</span>Si, <span class="dt">probs =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.10</span>))</a>
<a class="sourceLine" id="cb63-4" data-line-number="4">labels_quant =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(quant)[<span class="op">-</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(quant)], <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(quant)[<span class="op">-</span><span class="dv">1</span>], <span class="dt">sep =</span> <span class="st">"-"</span>)</a>
<a class="sourceLine" id="cb63-5" data-line-number="5"> </a>
<a class="sourceLine" id="cb63-6" data-line-number="6">si_density =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/density">density</a></span>(si_df<span class="op">$</span>Si)[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"x"</span>, <span class="st">"y"</span>)])</a>
<a class="sourceLine" id="cb63-7" data-line-number="7">si_density =<span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(si_density, x <span class="op">&gt;=</span><span class="st"> </span>quant[[<span class="dv">1</span>]] <span class="op">&amp;</span><span class="st"> </span>x <span class="op">&lt;=</span><span class="st"> </span>quant[[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(quant)]])</a>
<a class="sourceLine" id="cb63-8" data-line-number="8">si_density<span class="op">$</span>quant =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/cut">cut</a></span>(si_density<span class="op">$</span>x, <span class="dt">breaks =</span> quant)   </a>
<a class="sourceLine" id="cb63-9" data-line-number="9">quant =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/quantile">quantile</a></span>(si_df<span class="op">$</span>Si, <span class="dt">probs =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.10</span>))</a>
<a class="sourceLine" id="cb63-10" data-line-number="10">labels_quant =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/paste">paste</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(quant)[<span class="op">-</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(quant)], <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(quant)[<span class="op">-</span><span class="dv">1</span>], <span class="dt">sep =</span> <span class="st">"-"</span>)</a>
<a class="sourceLine" id="cb63-11" data-line-number="11"></a>
<a class="sourceLine" id="cb63-12" data-line-number="12">si_dens =<span class="st"> </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="dt">data =</span> si_density, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y)) <span class="op">+</span></a>
<a class="sourceLine" id="cb63-13" data-line-number="13"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_area</a></span>(<span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">fill =</span> quant)) <span class="op">+</span></a>
<a class="sourceLine" id="cb63-14" data-line-number="14"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span>(<span class="dt">palette =</span> <span class="st">"RdYlBu"</span>, <span class="dt">labels =</span> labels_quant,</a>
<a class="sourceLine" id="cb63-15" data-line-number="15">                    <span class="dt">name =</span> <span class="st">"Quantile"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb63-16" data-line-number="16"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>(<span class="dt">size =</span> <span class="dv">1</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb63-17" data-line-number="17"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span>(<span class="st">"Scarcity values"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb63-18" data-line-number="18"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span>(<span class="st">"Frequency"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb63-19" data-line-number="19"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span>(<span class="st">"Density of scarcity values"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb63-20" data-line-number="20"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span>()</a>
<a class="sourceLine" id="cb63-21" data-line-number="21"></a>
<a class="sourceLine" id="cb63-22" data-line-number="22">si_dens</a></code></pre></div>
<p><img src="rarity_indices_files/figure-html/unnamed-chunk-8-3.png" width="700"></p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1"><span class="co"># Regional rarity: restrictedness versus uniqueness</span></a>
<a class="sourceLine" id="cb64-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colnames">colnames</a></span>(ri_df)[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/colnames">colnames</a></span>(ri_df) <span class="op">==</span><span class="st"> "sp"</span>] =<span class="st"> "species"</span></a>
<a class="sourceLine" id="cb64-3" data-line-number="3">ri_ui &lt;-<span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">inner_join</a></span>(ri_df, ui_df, <span class="dt">by =</span> <span class="st">"species"</span>)</a>
<a class="sourceLine" id="cb64-4" data-line-number="4"></a>
<a class="sourceLine" id="cb64-5" data-line-number="5"><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(ri_ui, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(Ri, Ui)) <span class="op">+</span></a>
<a class="sourceLine" id="cb64-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb64-7" data-line-number="7"><span class="st">  </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span>() </a></code></pre></div>
<p><img src="rarity_indices_files/figure-html/unnamed-chunk-8-4.png" width="700"></p>
</div>
<div id="references" class="section level1">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<p>Choler, P. (2005) Consistent shifts in Alpine plant traits along a mesotopographical gradient. Arctic, Antarctic, and Alpine Research, 37,444-453.</p>
<p>Violle C., Thuiller W., Mouquet N., Munoz F., Kraft NJB, Cadotte MW, Livingstone SW, Mouillot D., Functional Rarity: The Ecology of Outliers, <em>Trends in Ecology &amp; Evolution</em>, Volume 32, Issue 5, May 2017, Pages 356-367, ISSN 0169-5347, <a href="https://doi.org/10.1016/j.tree.2017.02.002" class="uri">https://doi.org/10.1016/j.tree.2017.02.002</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#framework">Framework</a></li>
      <li><a href="#dataset-example">Dataset example</a></li>
      <li>
<a href="#functional-rarity-indices">Functional rarity indices</a><ul class="nav nav-pills nav-stacked">
<li><a href="#inputs-of-functions">Inputs of functions</a></li>
      <li><a href="#indices">Indices</a></li>
      </ul>
</li>
      <li><a href="#plots">Plots</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Matthias Grenié, Pierre Denelle, Caroline Tucker.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
